<!doctype html>
<html lang="pt-br">

<head>
  <meta charset="utf-8">
  <title>LegendariosMinas</title>
  <!--"https://pablozagnoli.github.io/pagLegen/"-->>
  <base href="/">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" type="image/x-icon" href="favicon.ico">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
  <script src="https://sdk.mercadopago.com/js/v2"></script>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
</head>

<body>

  <app-root></app-root>

  <script type="text/javascript">
    const mp = new MercadoPago('APP_USR-185bfd07-2552-4ecd-990c-0abbac069d15');

    const bricksBuilder = mp.bricks();


    const renderPaymentBrick = async (bricksBuilder) => {
      const settings = {
        initialization: {
          amount: 100, // valor total a ser pago
          paymentId: '53958642296',
        },
        customization: {
          paymentMethods: {
            creditCard: 'all',
            debitCard: 'all',
            bankTransfer: ['pix'],
          },
        },
        callbacks: {
          onReady: () => {
            /*
              Callback chamado quando o Brick estiver pronto.
              Aqui você pode ocultar loadings do seu site, por exemplo.
            */
          },
          onSubmit: ({ selectedPaymentMethod, formData }) => {

            sessionStorage.setItem("formData", JSON.stringify(formData))
            let textfor = document.getElementById("acioneeventodeclickpagamento");
            textfor.click();
            // callback chamado ao clicar no botão de submissão dos dados
            return new Promise((resolve, reject) => {

            });
          },
          onError: (error) => {
            // callback chamado para todos os casos de erro do Brick
            console.error(error);
          },
        },
      };

      try {
        await new Promise(f => setTimeout(f, 3000));
        window.paymentBrickController = await bricksBuilder.create(
          'payment',
          'containerpagamento',
          settings
        );

      } catch (error) {
        await new Promise(f => setTimeout(f, 3000));
        window.paymentBrickController = await bricksBuilder.create(
          'payment',
          'containerpagamento',
          settings
        );


      }

    };

    renderPaymentBrick(bricksBuilder);

  </script>

  <script>

    const mp2 = new MercadoPago('APP_USR-185bfd07-2552-4ecd-990c-0abbac069d15');

    const bricksBuilder2 = mp2.bricks();





    const renderStausScreenBrick = async (bricksBuilder) => {
      const settings = {
        initialization: {
          paymentId: sessionStorage.getItem("numPag"), // id de pagamento gerado pelo Mercado Pago
        },
        callbacks: {
          onReady: () => {
            // callback chamado quando o Brick estiver pronto
          },
          onError: (error) => {
            // callback chamado para todos os casos de erro do Brick
          },
        },
      };


      try {
        await new Promise(f => setTimeout(f, 3000));
        window.statusBrickController = await bricksBuilder2.create(
          'statusScreen',
          'statuscontainerpagamento',
          settings
        );

      } catch (error) {
        await new Promise(f => setTimeout(f, 3000));
        window.statusBrickController = await bricksBuilder2.create(
          'statusScreen',
          'statuscontainerpagamento',
          settings
        );
      }

    };

    renderStausScreenBrick(bricksBuilder);

  </script>

</body>

</html>
