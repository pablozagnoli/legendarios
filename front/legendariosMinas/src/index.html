<!doctype html>
<html lang="pt-br">

<head>
  <meta charset="utf-8">
  <title>LegendariosMinas</title>
  <!--"https://pablozagnoli.github.io/pagLegen/"-->>
  <base href="/">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" type="image/x-icon" href="favicon.ico">
  <script src="https://sdk.mercadopago.com/js/v2"></script>
</head>

<body>

  <app-root></app-root>

  <script type="text/javascript">
    const mp = new MercadoPago('APP_USR-185bfd07-2552-4ecd-990c-0abbac069d15');

    const bricksBuilder = mp.bricks();


    const renderPaymentBrick = async (bricksBuilder) => {
      const settings = {
        initialization: {
          amount: 100, // valor total a ser pago
        },
        customization: {
          paymentMethods: {
            creditCard: 'all',
            debitCard: 'all',
            bankTransfer: ['pix'],
          },
        },
        callbacks: {
          onReady: () => {
            /*
              Callback chamado quando o Brick estiver pronto.
              Aqui você pode ocultar loadings do seu site, por exemplo.
            */
          },
          onSubmit: ({ selectedPaymentMethod, formData }) => {

            sessionStorage.setItem("formData", JSON.stringify(formData))
            let textfor = document.getElementById("acioneeventodeclickpagamento");
            textfor.click();
            // callback chamado ao clicar no botão de submissão dos dados
            return new Promise((resolve, reject) => {

            });
          },
          onError: (error) => {
            // callback chamado para todos os casos de erro do Brick
            console.error(error);
          },
        },
      };
      window.paymentBrickController = await bricksBuilder.create(
        'payment',
        'containerpagamento',
        settings
      );
    };
    renderPaymentBrick(bricksBuilder);

  </script>

</body>

</html>
